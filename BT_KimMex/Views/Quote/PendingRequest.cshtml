
@{
    ViewBag.Title = "PendingRequest";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h3 class="title">My Request List</h3>

<table class="table table-bordered" id="quote_table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Date</th>
            <th>Quote No.</th>
            <th>Supplier Name</th>
            <th>Total Amount ($)</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

@section scripts{
    <script type="text/javascript">
        $(function () {
            var t = $('#quote_table').DataTable({
                "ajax": {
                    "url": "@Url.Action("GetMyRequestListItemsJson", "Quote")",
                        "type": "GET",
                        "dataType": "json"
                    },
                    "columns": [
                        { "data": "quote_id" },
                        {
                            "data": "created_date", render: function (data, type, full, meta) {
                                return new Date(parseInt(data.replace("/Date(", "").replace(")/", ""), 10)).toISOString().slice(0, 10);
                            }
                        },
                        {
                            "render": function (data, type, full, meta) {
                                return '<a href="/Quote/Details/' + full.quote_id + '">' + full.quote_no + '</a>';
                            }
                        },
                        { "data": "supplier_name" },
                                { "data": "amount" },
                                
                                
                                {
                                    "render": function (data, type, full, meta) {
                                        return full.quote_status;
                                    }
                                },
                ],
                    "order": [[1, "desc"]],
            });
            t.on('order.dt search.dt', function () {
                t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
            $('select[name="quote_table_length"]').addClass('datatable-control');
            $('input[aria-controls="quote_table"]').addClass('datatable-control');
        });
    </script>
    }